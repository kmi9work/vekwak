$("span#comment_button").hide();
<% if params[:comment_id] %>
$("<%= escape_javascript render(:file => 'comments/new.html') %>").insertAfter('#comment_top_<%= params[:comment_id] %>'); 
$('#comment_new<%= params[:comment_id] %>').slideDown();
$('html, body').stop().animate({scrollTop: $('#comment_new<%= params[:comment_id] %>').offset().top}, 1000);
<% elsif params[:post_id] %>
$('#comments').append("<%= escape_javascript render(:file => 'comments/new.html') %>");
$('#comment_new').slideDown(); 
$('html, body').stop().animate({scrollTop: $('#comment_new').offset().top}, 1000);
<% else %>
alert("Do not do it again!!11");
<% end %>
$("#textile_comment").markItUp(mySettings);