<div class="grey-bg">
<h2><%= h @post.title %></h2>

<div class="grey-bg-padding">

<p>
  <% if @post.content and !@post.content.strip.empty? %>
    <%= @post.content %>
  <% else %>
    <%= @post.annotation %>
  <% end %>
</p>

<p>
  <div id="post_rating">
  <b>Рейтинг:</b><font color="<%= font_color(@post.rating) %>"> <%= link_to h(@post.rating), {:url => {:action => :post_raters, :id => @post.id}, :update => 'post_raters'}, :remote =>true  -%></font>
     <%= link_to "+" || image_tag("up.png") || "+",
                             { :url => {:action => :plus, :id => @post.id}},
                               :remote => true -%> |
     <%= link_to "-" || image_tag("down.png") || "-", 
                             {:update => "post_rating", 
                             :url => {:action => :minus, :id => @post.id}},
                             :remote =>true -%>
   </div> 
   <div id="post_raters"></div>
  
</p>
  
<div class = "under_post">
  Автор: <%= h @post.student.login -%>
  <% if @post.student.rating -%>
  (<font color="<%= font_color(@post.student.rating) %>"><%= h @post.student.rating -%></font>)
  <% end -%>
</div>
<br>
  <div id="comments">
    <%= render :partial => 'comments/comment', :collection => @comments, :locals => {:top_level => true} %>
  </div>
</div>

<span id="comment_button"><%= link_to 'Комментировать', new_post_comment_path(@post.id, :format => :js), :remote => true %> |
<%= link_to 'Назад', posts_path %> 
<% if @student.admin or @student.id == @post.student.id %>
| 
<%= link_to 'Удалить', post_path(@post.id), :method => :delete %> 

<% end %>

<% if @student.id == @post.student.id %>
| <%= link_to 'Редактировать', edit_post_path(@post.id) %> 
<% end %>
</span>

</div>
